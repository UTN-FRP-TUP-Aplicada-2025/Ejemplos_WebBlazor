@using Ejemplos.Components

@using static Ejemplos.Components.SelectObjectComponent

<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                <h3>Filtra el listado dado</h3>
                <SelectObjectComponent @bind-Personas="Personas" @bind-PersonasResult="PersonasResult"/>
            </div>
        </div> 

    </div> 
</div>

@code {
    [Parameter]
    public List<PersonaViewModel> Personas { get; set; } = new();

    [Parameter]
    public EventCallback<List<PersonaViewModel>> PersonasChanged { get; set; }

    [Parameter]
    public List<PersonaViewModel> PersonasResult { get; set; } = new();

    [Parameter]
    public EventCallback<List<PersonaViewModel>> PersonasResultChanged { get; set; }

    protected override async Task OnInitializedAsync()
    {
        // Inicializar PersonasResult con todas las personas si está vacío
        if (PersonasResult?.Count == 0 && Personas?.Count > 0)
        {
            PersonasResult = new List<PersonaViewModel>(Personas);
            if (PersonasResultChanged.HasDelegate)
            {
                await PersonasResultChanged.InvokeAsync(PersonasResult);
            }
        }
    }
}
